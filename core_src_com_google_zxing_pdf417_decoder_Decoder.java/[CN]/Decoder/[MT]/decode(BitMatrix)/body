{
  BitMatrixParser parser=new BitMatrixParser(bits);
  int[] codewords=parser.readCodewords();
  if (codewords == null || codewords.length == 0) {
    throw FormatException.getFormatInstance();
  }
  int ecLevel=parser.getECLevel();
  int numECCodewords=1 << (ecLevel + 1);
  int[] erasures=parser.getErasures();
  correctErrors(codewords,erasures,numECCodewords);
  verifyCodewordCount(codewords,numECCodewords);
  return DecodedBitStreamParser.decode(codewords);
}
