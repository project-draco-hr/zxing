{
  long t2;
  long t1=System.currentTimeMillis();
  BitMatrixParser parser=new BitMatrixParser(bits);
  int[] codewords=parser.readCodewords();
  if (codewords == null || codewords.length == 0) {
    if (debug)     System.out.println("No codewords read");
    throw ReaderException.getInstance();
  }
  if (debug) {
    t2=System.currentTimeMillis();
    System.out.println("Elapsed time in ms - BitMatrixParser " + (t2 - t1));
  }
  int ecLevel=parser.getECLevel();
  int numECCodewords=1 << (ecLevel + 1);
  int erasures[]=parser.getErasures();
  t1=System.currentTimeMillis();
  correctErrors(codewords,erasures,numECCodewords);
  if (debug) {
    t2=System.currentTimeMillis();
    System.out.println("Elapsed time in ms - Reed Solomon " + (t2 - t1));
  }
  verifyCodewordCount(codewords,numECCodewords);
  t1=System.currentTimeMillis();
  DecoderResult dr=DecodedBitStreamParser.decode(codewords);
  if (debug) {
    t2=System.currentTimeMillis();
    System.out.println("Elapsed time in ms - DecodeBitStreamParser " + (t2 - t1));
  }
  return dr;
}
