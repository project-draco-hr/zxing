{
  if (hasSurface) {
    Canvas canvas=surfaceHolder.lockCanvas();
    cameraManager.capturePreview(canvas);
    Rect frame=cameraManager.getFramingRect();
    int width=canvas.getBitmapWidth();
    int height=canvas.getBitmapHeight();
    Paint paint=new Paint();
    paint.setColor(Color.BLACK);
    paint.setAlpha(96);
    Rect box=new Rect(0,0,width,frame.top);
    canvas.drawRect(box,paint);
    box.set(0,frame.top,frame.left,frame.bottom + 1);
    canvas.drawRect(box,paint);
    box.set(frame.right + 1,frame.top,width,frame.bottom + 1);
    canvas.drawRect(box,paint);
    box.set(0,frame.bottom + 1,width,height);
    canvas.drawRect(box,paint);
    paint.setAlpha(255);
    box.set(frame.left,frame.top,frame.right + 1,frame.top + 2);
    canvas.drawRect(box,paint);
    box.set(frame.left,frame.top + 2,frame.left + 2,frame.bottom - 1);
    canvas.drawRect(box,paint);
    box.set(frame.right - 1,frame.top,frame.right + 1,frame.bottom - 1);
    canvas.drawRect(box,paint);
    box.set(frame.left,frame.bottom - 1,frame.right + 1,frame.bottom + 1);
    canvas.drawRect(box,paint);
    paint.setColor(Color.RED);
    paint.setAlpha(SCANNER_ALPHA[scannerAlpha]);
    int middle=frame.height() / 2 + frame.top;
    box.set(frame.left + 2,middle - 1,frame.right - 1,middle + 2);
    canvas.drawRect(box,paint);
    surfaceHolder.unlockCanvasAndPost(canvas);
    scannerAlpha=(scannerAlpha + 1) % SCANNER_ALPHA.length;
  }
}
