def SharedFlagChecker(source, target, env):
    same = env.subst('$STATIC_AND_SHARED_OBJECTS_ARE_THE_SAME')
    if ((same == '0') or (same == '') or (same == 'False')):
        for src in source:
            try:
                shared = src.attributes.shared
            except AttributeError:
                shared = None
            if (not shared):
                raise SCons.Errors.UserError(('Source file: %s is static and is not compatible with shared target: %s' % (src, target[0])))
