{
  List<Result> items=getHistoryItems();
  int size=items.size();
  String[] dialogItems=new String[size + 2];
  for (int i=0; i < size; i++) {
    dialogItems[i]=items.get(i).getText();
  }
  Resources res=activity.getResources();
  dialogItems[dialogItems.length - 2]=res.getString(R.string.history_send);
  dialogItems[dialogItems.length - 1]=res.getString(R.string.history_clear_text);
  DialogInterface.OnClickListener clickListener=new HistoryClickListener(dialogItems,items);
  AlertDialog.Builder builder=new AlertDialog.Builder(activity);
  builder.setTitle(R.string.history_title);
  builder.setItems(dialogItems,clickListener);
  return builder.create();
}
