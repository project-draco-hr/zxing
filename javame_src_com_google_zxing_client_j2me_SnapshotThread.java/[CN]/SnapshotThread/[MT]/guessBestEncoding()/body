{
  if (bestEncoding == null) {
    String supportsVideoCapture=System.getProperty("supports.video.capture");
    if ("false".equals(supportsVideoCapture)) {
      throw new MediaException("supports.video.capture is false");
    }
    bestEncoding="";
    String videoSnapshotEncodings=System.getProperty("video.snapshot.encodings");
    if (videoSnapshotEncodings != null) {
      int pngEncodingStart=videoSnapshotEncodings.indexOf("encoding=png");
      if (pngEncodingStart >= 0) {
        int space=videoSnapshotEncodings.indexOf(' ',pngEncodingStart);
        bestEncoding=space >= 0 ? videoSnapshotEncodings.substring(pngEncodingStart,space) : videoSnapshotEncodings.substring(pngEncodingStart);
      }
    }
  }
  return bestEncoding;
}
