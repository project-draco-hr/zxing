{
  Player player=zXingMIDlet.getPlayer();
  do {
    waitForSignal();
    try {
      multimediaManager.setFocus(player);
      byte[] snapshot=takeSnapshot();
      Image capturedImage=Image.createImage(snapshot,0,snapshot.length);
      LuminanceSource source=new LCDUIImageLuminanceSource(capturedImage);
      BinaryBitmap bitmap=new BinaryBitmap(new GlobalHistogramBinarizer(source));
      Reader reader=new MultiFormatReader();
      Result result=reader.decode(bitmap);
      zXingMIDlet.handleDecodedText(result);
    }
 catch (    ReaderException re) {
      zXingMIDlet.showError("Sorry, no barcode was found.");
    }
catch (    MediaException me) {
      zXingMIDlet.showError(me);
    }
catch (    RuntimeException re) {
      zXingMIDlet.showError(re);
    }
  }
 while (!done);
}
