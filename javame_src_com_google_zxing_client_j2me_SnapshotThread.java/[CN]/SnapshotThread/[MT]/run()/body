{
  Player player=zXingMIDlet.getPlayer();
  do {
    waitForSignal();
    try {
      AdvancedMultimediaManager.setFocus(player);
      byte[] snapshot=takeSnapshot();
      Image capturedImage=Image.createImage(snapshot,0,snapshot.length);
      MonochromeBitmapSource source=new LCDUIImageMonochromeBitmapSource(capturedImage);
      Reader reader=new MultiFormatReader();
      Result result=reader.decode(source);
      zXingMIDlet.handleDecodedText(result.getText());
    }
 catch (    ReaderException re) {
      zXingMIDlet.showError("Sorry, no barcode was found.");
    }
catch (    MediaException me) {
      zXingMIDlet.showError(me);
    }
catch (    RuntimeException re) {
      zXingMIDlet.showError(re);
    }
  }
 while (!done);
}
