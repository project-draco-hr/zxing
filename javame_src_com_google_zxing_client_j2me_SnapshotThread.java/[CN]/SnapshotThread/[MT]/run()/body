{
  Player player=zXingMIDlet.getPlayer();
  try {
    AdvancedMultimediaManager.setFocus(player);
    player.stop();
    byte[] snapshot=zXingMIDlet.getVideoControl().getSnapshot(null);
    Image capturedImage=Image.createImage(snapshot,0,snapshot.length);
    MonochromeBitmapSource source=new LCDUIImageMonochromeBitmapSource(capturedImage);
    Reader reader=new MultiFormatReader();
    Result result=reader.decode(source);
    zXingMIDlet.handleDecodedText(result.getText());
  }
 catch (  ReaderException re) {
    zXingMIDlet.showError("No barcode was detected in this image. Try again.");
  }
catch (  Throwable t) {
    zXingMIDlet.showError(t);
  }
 finally {
    try {
      player.start();
    }
 catch (    MediaException me) {
      zXingMIDlet.showError(me);
    }
    currentThread=null;
  }
}
