{
  if (!rawResult.toString().equals(mLastResult)) {
    mLastResult=rawResult.toString();
    playBeepSound();
    ResultPoint[] points=rawResult.getResultPoints();
    if (points != null && points.length > 0) {
      mViewfinderView.drawResultPoints(points);
    }
    TextView textView=(TextView)findViewById(R.id.status_text_view);
    ParsedResult result=ResultHandler.parseResult(rawResult);
    String displayResult=result.getDisplayResult();
    displayResult=displayResult.replace("\r","");
    textView.setText(displayResult);
    if (!mScanIntent) {
      Button actionButton=(Button)findViewById(R.id.status_action_button);
      int buttonText=ResultHandler.getActionButtonText(result.getType());
      if (buttonText != 0) {
        actionButton.setVisibility(View.VISIBLE);
        actionButton.setText(buttonText);
        ResultHandler resultHandler=new ResultHandler(this,result);
        actionButton.setOnClickListener(resultHandler);
        actionButton.requestFocus();
      }
 else {
        actionButton.setVisibility(View.GONE);
      }
    }
    View statusView=findViewById(R.id.status_view);
    statusView.setBackgroundColor(getResources().getColor(R.color.result_points));
    if (mScanIntent) {
      Intent intent=new Intent(Intents.Scan.ACTION);
      intent.putExtra(Intents.Scan.RESULT,rawResult.toString());
      intent.putExtra(Intents.Scan.RESULT_FORMAT,rawResult.getBarcodeFormat().toString());
      Message message=Message.obtain(mHandler,R.id.return_scan_result);
      message.obj=intent;
      mHandler.sendMessageDelayed(message,1000);
    }
 else {
      Message message=Message.obtain(mHandler,R.id.restart_preview);
      mHandler.sendMessageDelayed(message,2000);
    }
  }
 else   if (mHandler != null) {
    Message message=Message.obtain(mHandler,R.id.restart_preview);
    message.sendToTarget();
  }
}
