def communicate(self, input=None):
    'Interact with process: Send data to stdin.  Read data from\n        stdout and stderr, until end-of-file is reached.  Wait for\n        process to terminate.  The optional input argument should be a\n        string to be sent to the child process, or None, if no data\n        should be sent to the child.\n\n        communicate() returns a tuple (stdout, stderr).'
    if ([self.stdin, self.stdout, self.stderr].count(None) >= 2):
        stdout = None
        stderr = None
        if self.stdin:
            if input:
                self.stdin.write(input)
            self.stdin.close()
        elif self.stdout:
            stdout = self.stdout.read()
        elif self.stderr:
            stderr = self.stderr.read()
        self.wait()
        return (stdout, stderr)
    return self._communicate(input)
