{
  Logger logger=Logger.getLogger("com.google.zxing");
  logger.addHandler(new ServletContextLogHandler(servletConfig.getServletContext()));
  String emailAddress=servletConfig.getInitParameter("emailAddress");
  String emailPassword=servletConfig.getInitParameter("emailPassword");
  if (emailAddress == null || emailPassword == null) {
    throw new ServletException("emailAddress or emailPassword not specified");
  }
  HttpParams params=new BasicHttpParams();
  HttpProtocolParams.setVersion(params,HttpVersion.HTTP_1_1);
  SchemeRegistry registry=new SchemeRegistry();
  registry.register(new Scheme("http",PlainSocketFactory.getSocketFactory(),80));
  registry.register(new Scheme("https",SSLSocketFactory.getSocketFactory(),443));
  client=new DefaultHttpClient(new ThreadSafeClientConnManager(params,registry),params);
  diskFileItemFactory=new DiskFileItemFactory();
  Authenticator emailAuthenticator=new EmailAuthenticator(emailAddress,emailPassword);
  emailTimer=new Timer("Email decoder timer",true);
  emailTimer.schedule(new DecodeEmailTask(emailAddress,emailAuthenticator),0L,EMAIL_CHECK_INTERVAL);
  log.info("DecodeServlet configured");
}
