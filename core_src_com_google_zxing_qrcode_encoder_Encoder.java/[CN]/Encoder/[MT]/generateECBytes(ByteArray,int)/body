{
  int numDataBytes=dataBytes.size();
  int[] toEncode=new int[numDataBytes + numEcBytesInBlock];
  for (int i=0; i < numDataBytes; i++) {
    toEncode[i]=dataBytes.at(i);
  }
  new ReedSolomonEncoder(GF256.QR_CODE_FIELD).encode(toEncode,numEcBytesInBlock);
  ByteArray ecBytes=new ByteArray(numEcBytesInBlock);
  for (int i=0; i < numEcBytesInBlock; i++) {
    ecBytes.set(i,toEncode[numDataBytes + i]);
  }
  return ecBytes;
}
