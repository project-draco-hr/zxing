def generate(env):
    'Add Builders and construction variables for javac to an Environment.'
    java_file = SCons.Tool.CreateJavaFileBuilder(env)
    java_class = SCons.Tool.CreateJavaClassFileBuilder(env)
    java_class_dir = SCons.Tool.CreateJavaClassDirBuilder(env)
    java_class.add_emitter(None, emit_java_classes)
    java_class.add_emitter(env.subst('$JAVASUFFIX'), emit_java_classes)
    java_class_dir.emitter = emit_java_classes
    env.AddMethod(Java)
    env['JAVAC'] = 'javac'
    env['JAVACFLAGS'] = SCons.Util.CLVar('')
    env['JAVABOOTCLASSPATH'] = []
    env['JAVACLASSPATH'] = []
    env['JAVASOURCEPATH'] = []
    env['_javapathopt'] = pathopt
    env['_JAVABOOTCLASSPATH'] = '${_javapathopt("-bootclasspath", "JAVABOOTCLASSPATH")} '
    env['_JAVACLASSPATH'] = '${_javapathopt("-classpath", "JAVACLASSPATH")} '
    env['_JAVASOURCEPATH'] = '${_javapathopt("-sourcepath", "JAVASOURCEPATH", "_JAVASOURCEPATHDEFAULT")} '
    env['_JAVASOURCEPATHDEFAULT'] = '${TARGET.attributes.java_sourcedir}'
    env['_JAVACCOM'] = '$JAVAC $JAVACFLAGS $_JAVABOOTCLASSPATH $_JAVACLASSPATH -d ${TARGET.attributes.java_classdir} $_JAVASOURCEPATH $SOURCES'
    env['JAVACCOM'] = "${TEMPFILE('$_JAVACCOM')}"
    env['JAVACLASSSUFFIX'] = '.class'
    env['JAVASUFFIX'] = '.java'
