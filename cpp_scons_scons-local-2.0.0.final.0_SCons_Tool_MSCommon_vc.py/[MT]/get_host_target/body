def get_host_target(env):
    debug('vc.py:get_host_target()')
    host_platform = env.get('HOST_ARCH')
    if (not host_platform):
        host_platform = platform.machine()
        if (not host_platform):
            host_platform = os.environ.get('PROCESSOR_ARCHITECTURE', '')
    req_target_platform = env.get('TARGET_ARCH')
    debug(('vc.py:get_host_target() req_target_platform:%s' % req_target_platform))
    if req_target_platform:
        target_platform = req_target_platform
    else:
        target_platform = host_platform
    try:
        host = _ARCH_TO_CANONICAL[host_platform.lower()]
    except KeyError as e:
        msg = 'Unrecognized host architecture %s'
        raise ValueError((msg % repr(host_platform)))
    try:
        target = _ARCH_TO_CANONICAL[target_platform.lower()]
    except KeyError as e:
        raise ValueError(('Unrecognized target architecture %s' % target_platform))
    return (host, target, req_target_platform)
