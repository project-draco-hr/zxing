{
  CharSequence contents=HttpHelper.downloadViaHttp("https://bsplus.srowen.com/ss?c=" + theCountry + "&t="+ type+ "&i="+ productID,HttpHelper.ContentType.XML);
  String detailPageURL=null;
  Collection<String> authors=new ArrayList<>();
  String title=null;
  String formattedNewPrice=null;
  String formattedUsedPrice=null;
  boolean error=false;
  try {
    XmlPullParser xpp=buildParser(contents);
    boolean seenItem=false;
    boolean seenLowestNewPrice=false;
    boolean seenLowestUsedPrice=false;
    boolean done=false;
    for (int eventType=xpp.getEventType(); !done && eventType != XmlPullParser.END_DOCUMENT; eventType=xpp.next()) {
      if (eventType == XmlPullParser.START_TAG) {
        String name=xpp.getName();
switch (name) {
case "Item":
          if (seenItem) {
            done=true;
          }
 else {
            seenItem=true;
          }
        break;
case "DetailPageURL":
      assertTextNext(xpp);
    detailPageURL=xpp.getText();
  break;
case "Author":
assertTextNext(xpp);
authors.add(xpp.getText());
break;
case "Title":
assertTextNext(xpp);
title=xpp.getText();
break;
case "LowestNewPrice":
seenLowestNewPrice=true;
seenLowestUsedPrice=false;
break;
case "LowestUsedPrice":
seenLowestNewPrice=false;
seenLowestUsedPrice=true;
break;
case "FormattedPrice":
if (seenLowestNewPrice || seenLowestUsedPrice) {
assertTextNext(xpp);
String theText=xpp.getText();
if (seenLowestNewPrice) {
formattedNewPrice=theText;
}
 else {
formattedUsedPrice=theText;
}
seenLowestNewPrice=false;
seenLowestUsedPrice=false;
}
break;
case "Errors":
error=true;
done=true;
break;
}
}
}
}
 catch (XmlPullParserException xppe) {
throw new IOException(xppe);
}
if (error || detailPageURL == null) {
return false;
}
Collection<String> newTexts=new ArrayList<>();
maybeAddText(title,newTexts);
maybeAddTextSeries(authors,newTexts);
if (formattedNewPrice != null) {
maybeAddText(formattedNewPrice,newTexts);
}
 else if (formattedUsedPrice != null) {
maybeAddText(formattedUsedPrice,newTexts);
}
append(productID,"Amazon " + theCountry,newTexts.toArray(new String[newTexts.size()]),detailPageURL);
return true;
}
