{
  int networkId;
  if (findNetworkInExistingConfig(config.SSID) == null) {
    statusView.setText(R.string.wifi_creating_network);
    networkId=wifiManager.addNetwork(config);
  }
 else {
    statusView.setText(R.string.wifi_modifying_network);
    networkId=wifiManager.updateNetwork(config);
  }
  if (networkId == -1 || !wifiManager.enableNetwork(networkId,disableOthers)) {
    return -1;
  }
  wifiManager.saveConfiguration();
  return networkId;
}
