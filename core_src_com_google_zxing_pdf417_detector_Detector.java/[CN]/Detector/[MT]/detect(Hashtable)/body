{
  if (!BlackPointEstimationMethod.TWO_D_SAMPLING.equals(image.getLastEstimationMethod())) {
    image.estimateBlackPoint(BlackPointEstimationMethod.TWO_D_SAMPLING,0);
  }
  ResultPoint[] vertices=findVertices(image);
  if (vertices == null) {
    vertices=findVertices180(image);
  }
  if (vertices != null) {
    float moduleWidth=computeModuleWidth(vertices);
    if (moduleWidth < 1.0f) {
      throw ReaderException.getInstance();
    }
    int dimension=computeDimension(vertices[4],vertices[6],vertices[5],vertices[7],moduleWidth);
    BitMatrix bits=sampleGrid(image,vertices[4],vertices[5],vertices[6],vertices[7],dimension);
    return new DetectorResult(bits,new ResultPoint[]{vertices[4],vertices[5],vertices[6],vertices[7]});
  }
 else {
    throw ReaderException.getInstance();
  }
}
