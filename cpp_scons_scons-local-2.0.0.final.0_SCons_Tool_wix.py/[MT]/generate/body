def generate(env):
    'Add Builders and construction variables for WiX to an Environment.'
    if (not exists(env)):
        return
    env['WIXCANDLEFLAGS'] = ['-nologo']
    env['WIXCANDLEINCLUDE'] = []
    env['WIXCANDLECOM'] = '$WIXCANDLE $WIXCANDLEFLAGS -I $WIXCANDLEINCLUDE -o ${TARGET} ${SOURCE}'
    env['WIXLIGHTFLAGS'].append('-nologo')
    env['WIXLIGHTCOM'] = '$WIXLIGHT $WIXLIGHTFLAGS -out ${TARGET} ${SOURCES}'
    object_builder = SCons.Builder.Builder(action='$WIXCANDLECOM', suffix='.wxiobj', src_suffix='.wxs')
    linker_builder = SCons.Builder.Builder(action='$WIXLIGHTCOM', src_suffix='.wxiobj', src_builder=object_builder)
    env['BUILDERS']['WiX'] = linker_builder
