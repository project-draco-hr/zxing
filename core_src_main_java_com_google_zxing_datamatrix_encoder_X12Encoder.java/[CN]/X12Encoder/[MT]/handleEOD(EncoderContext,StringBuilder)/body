{
  context.updateSymbolInfo();
  int available=context.getSymbolInfo().getDataCapacity() - context.getCodewordCount();
  int count=buffer.length();
  context.pos-=count;
  if (context.getRemainingCharacters() != 1 || available != 1) {
    context.writeCodeword(HighLevelEncoder.X12_UNLATCH);
  }
  if (count > 0) {
    context.signalEncoderChange(HighLevelEncoder.ASCII_ENCODATION);
  }
}
