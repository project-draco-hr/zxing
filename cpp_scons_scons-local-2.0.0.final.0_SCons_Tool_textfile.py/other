__doc__ = '\nTextfile/Substfile builder for SCons.\n\n    Create file \'target\' which typically is a textfile.  The \'source\'\n    may be any combination of strings, Nodes, or lists of same.  A\n    \'linesep\' will be put between any part written and defaults to\n    os.linesep.\n\n    The only difference between the Textfile builder and the Substfile\n    builder is that strings are converted to Value() nodes for the\n    former and File() nodes for the latter.  To insert files in the\n    former or strings in the latter, wrap them in a File() or Value(),\n    respectively.\n\n    The values of SUBST_DICT first have any construction variables\n    expanded (its keys are not expanded).  If a value of SUBST_DICT is\n    a python callable function, it is called and the result is expanded\n    as the value.  Values are substituted in a "random" order; if any\n    substitution could be further expanded by another subsitition, it\n    is unpredictible whether the expansion will occur.\n'
__revision__ = 'src/engine/SCons/Tool/textfile.py 5023 2010/06/14 22:05:46 scons'
import SCons
import os
import re
from SCons.Node import Node
from SCons.Node.Python import Value
from SCons.Util import is_String, is_Sequence, is_Dict
_common_varlist = ['SUBST_DICT', 'LINESEPARATOR']
_text_varlist = (_common_varlist + ['TEXTFILEPREFIX', 'TEXTFILESUFFIX'])
_text_builder = SCons.Builder.Builder(action=SCons.Action.Action(_action, _strfunc, varlist=_text_varlist), source_factory=Value, emitter=_convert_list, prefix='$TEXTFILEPREFIX', suffix='$TEXTFILESUFFIX')
_subst_varlist = (_common_varlist + ['SUBSTFILEPREFIX', 'TEXTFILESUFFIX'])
_subst_builder = SCons.Builder.Builder(action=SCons.Action.Action(_action, _strfunc, varlist=_subst_varlist), source_factory=SCons.Node.FS.File, emitter=_convert_list, prefix='$SUBSTFILEPREFIX', suffix='$SUBSTFILESUFFIX', src_suffix=['.in'])
