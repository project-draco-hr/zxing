def lexEmitter(target, source, env):
    (sourceBase, sourceExt) = os.path.splitext(SCons.Util.to_String(source[0]))
    if (sourceExt == '.lm'):
        target = [(sourceBase + '.m')]
    fileGenOptions = ['--header-file=', '--tables-file=']
    lexflags = env.subst('$LEXFLAGS', target=target, source=source)
    for option in SCons.Util.CLVar(lexflags):
        for fileGenOption in fileGenOptions:
            l = len(fileGenOption)
            if (option[:l] == fileGenOption):
                fileName = option[l:].strip()
                target.append(fileName)
    return (target, source)
