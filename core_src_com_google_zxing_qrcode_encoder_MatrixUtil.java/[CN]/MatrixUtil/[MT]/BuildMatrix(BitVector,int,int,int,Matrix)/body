{
  MatrixUtil.ClearMatrix(matrix);
  if (!EmbedBasicPatterns(version,matrix)) {
    return false;
  }
  if (!EmbedTypeInfo(ec_level,mask_pattern,matrix)) {
    return false;
  }
  if (!MaybeEmbedVersionInfo(version,matrix)) {
    return false;
  }
  return EmbedDataBits(data_bits,mask_pattern,matrix);
}
