{
  BitSource bits=new BitSource(bytes);
  StringBuffer result=new StringBuffer();
  int mode=ASCII_ENCODE;
  do {
    if (mode != PAD_ENCODE) {
      if (mode == ASCII_ENCODE) {
        mode=decodeAsciiSegment(bits,result);
      }
 else       if (mode == C40_ENCODE) {
        mode=decodeC40Segment(bits,result);
      }
 else       if (mode == TEXT_ENCODE) {
        mode=decodeTextSegment(bits,result);
      }
 else       if (mode == ANSIX12_ENCODE) {
        mode=decodeAnsiX12Segment(bits,result);
      }
 else       if (mode == EDIFACT_ENCODE) {
        mode=decodeEdifactSegment(bits,result);
      }
 else       if (mode == BASE256_ENCODE) {
        mode=decodeBase256Segment(bits,result);
      }
 else {
        throw new ReaderException("Unsupported mode indicator");
      }
    }
  }
 while (mode != PAD_ENCODE && bits.available() > 0);
  return result.toString();
}
