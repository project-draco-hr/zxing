{
  BitSource bits=new BitSource(bytes);
  StringBuffer result=new StringBuffer();
  int mode=ASCII_ENCODE;
  do {
    if (mode == ASCII_ENCODE) {
      mode=decodeAsciiSegment(bits,result);
    }
 else {
switch (mode) {
case C40_ENCODE:
        decodeC40Segment(bits,result);
      break;
case TEXT_ENCODE:
    decodeTextSegment(bits,result);
  break;
case ANSIX12_ENCODE:
decodeAnsiX12Segment(bits,result);
break;
case EDIFACT_ENCODE:
decodeEdifactSegment(bits,result);
break;
case BASE256_ENCODE:
decodeBase256Segment(bits,result);
break;
default :
throw new ReaderException("Unsupported mode indicator");
}
mode=ASCII_ENCODE;
}
}
 while (mode != PAD_ENCODE && bits.available() > 0);
return result.toString();
}
