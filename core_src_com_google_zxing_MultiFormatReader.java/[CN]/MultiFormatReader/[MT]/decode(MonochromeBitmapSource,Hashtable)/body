{
  Hashtable possibleFormats=hints == null ? null : (Hashtable)hints.get(DecodeHintType.POSSIBLE_FORMATS);
  boolean tryUPC;
  boolean tryQR;
  if (possibleFormats == null) {
    tryUPC=true;
    tryQR=true;
  }
 else {
    tryUPC=possibleFormats.contains(BarcodeFormat.UPC);
    tryQR=possibleFormats.contains(BarcodeFormat.QR_CODE);
  }
  if (!(tryUPC || tryQR)) {
    throw new ReaderException("POSSIBLE_FORMATS specifies no supported types");
  }
  ReaderException savedRE=null;
  if (tryUPC) {
    try {
      return new UPCReader().decode(image,hints);
    }
 catch (    ReaderException re) {
      savedRE=re;
    }
  }
  if (tryQR) {
    try {
      return new QRCodeReader().decode(image,hints);
    }
 catch (    ReaderException re) {
      savedRE=re;
    }
  }
  throw savedRE;
}
