{
  Hashtable possibleFormats=hints == null ? null : (Hashtable)hints.get(DecodeHintType.POSSIBLE_FORMATS);
  boolean tryUPC=false;
  boolean tryQR=false;
  if (possibleFormats == null) {
    tryUPC=true;
    tryQR=true;
  }
 else   if (possibleFormats.contains(BarcodeFormat.UPC)) {
    tryUPC=true;
  }
 else   if (possibleFormats.contains(BarcodeFormat.QR_CODE)) {
    tryQR=true;
  }
 else {
    throw new ReaderException("POSSIBLE_FORMATS specifies no supported types");
  }
  if (tryUPC) {
    try {
      return new UPCReader().decode(image,hints);
    }
 catch (    ReaderException e) {
    }
  }
  if (tryQR) {
    try {
      return new QRCodeReader().decode(image,hints);
    }
 catch (    ReaderException e) {
    }
  }
  throw new ReaderException("Could not locate and decode a barcode in the image");
}
