{
  Hashtable possibleFormats=hints == null ? null : (Hashtable)hints.get(DecodeHintType.POSSIBLE_FORMATS);
  boolean tryOneD;
  boolean tryQR;
  if (possibleFormats == null) {
    tryOneD=true;
    tryQR=true;
  }
 else {
    tryOneD=possibleFormats.contains(BarcodeFormat.ONED);
    tryQR=possibleFormats.contains(BarcodeFormat.QR_CODE);
  }
  if (!(tryOneD || tryQR)) {
    throw new ReaderException("POSSIBLE_FORMATS specifies no supported types");
  }
  if (tryOneD) {
    try {
      return new MultiFormatOneDReader().decode(image,hints);
    }
 catch (    ReaderException re) {
    }
  }
  if (tryQR) {
    try {
      return new QRCodeReader().decode(image,hints);
    }
 catch (    ReaderException re) {
    }
  }
  throw new ReaderException("No barcode was detected in this image.");
}
