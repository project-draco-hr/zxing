{
  String rawText=result.getText();
  if (rawText == null || (!rawText.startsWith("geo:") && !rawText.startsWith("GEO:"))) {
    return null;
  }
  int queryStart=rawText.indexOf('?',4);
  String geoURIWithoutQuery=queryStart < 0 ? rawText.substring(4) : rawText.substring(4,queryStart);
  int latitudeEnd=geoURIWithoutQuery.indexOf(',');
  if (latitudeEnd < 0) {
    return null;
  }
  int longitudeEnd=geoURIWithoutQuery.indexOf(',',latitudeEnd + 1);
  double latitude, longitude, altitude;
  try {
    latitude=Double.parseDouble(geoURIWithoutQuery.substring(0,latitudeEnd));
    if (longitudeEnd < 0) {
      longitude=Double.parseDouble(geoURIWithoutQuery.substring(latitudeEnd + 1));
      altitude=0.0;
    }
 else {
      longitude=Double.parseDouble(geoURIWithoutQuery.substring(latitudeEnd + 1,longitudeEnd));
      altitude=Double.parseDouble(geoURIWithoutQuery.substring(longitudeEnd + 1));
    }
  }
 catch (  NumberFormatException nfe) {
    return null;
  }
  return new GeoParsedResult(rawText.startsWith("GEO:") ? "geo:" + rawText.substring(4) : rawText,latitude,longitude,altitude);
}
