{
  assertFalse(testResults.isEmpty());
  assertTrue("Please run from the 'core' directory",testBase.exists());
  File[] imageFiles=testBase.listFiles(IMAGE_NAME_FILTER);
  int[] passedCounts=new int[testResults.size()];
  for (  File testImage : imageFiles) {
    System.out.println("Starting " + testImage.getAbsolutePath());
    BufferedImage image=ImageIO.read(testImage);
    String testImageFileName=testImage.getName();
    File expectedTextFile=new File(testBase,testImageFileName.substring(0,testImageFileName.indexOf('.')) + ".txt");
    String expectedText=readFileAsString(expectedTextFile);
    for (int x=0; x < testResults.size(); x++) {
      if (doTestOneImage(image,testResults.get(x).getRotation(),expectedText)) {
        passedCounts[x]++;
      }
    }
  }
  for (int x=0; x < testResults.size(); x++) {
    System.out.println("Rotation " + testResults.get(x).getRotation() + " degrees: "+ passedCounts[x]+ " of "+ imageFiles.length+ " images passed ("+ testResults.get(x).getMustPassCount()+ " required)");
    assertTrue("Rotation " + testResults.get(x).getRotation() + " degrees: Too many images failed",passedCounts[x] >= testResults.get(x).getMustPassCount());
  }
}
