{
  StringBuilder result=new StringBuilder((int)file.length());
  InputStreamReader reader=new InputStreamReader(new FileInputStream(file),charset);
  try {
    char[] buffer=new char[256];
    int charsRead;
    while ((charsRead=reader.read(buffer)) > 0) {
      result.append(buffer,0,charsRead);
    }
  }
  finally {
    reader.close();
  }
  String stringContents=result.toString();
  if (stringContents.endsWith("\n")) {
    log.warning("String contents of file " + file + " end with a newline. "+ "This may not be intended and cause a test failure");
  }
  return stringContents;
}
