def _semi_deepcopy_inst(x):
    if hasattr(x, '__semi_deepcopy__'):
        return x.__semi_deepcopy__()
    elif isinstance(x, UserDict):
        return x.__class__(_semi_deepcopy_dict(x))
    elif isinstance(x, UserList):
        return x.__class__(_semi_deepcopy_list(x))
    else:
        return x
