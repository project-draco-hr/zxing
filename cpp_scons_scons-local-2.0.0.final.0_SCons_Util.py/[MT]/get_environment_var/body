def get_environment_var(varstr):
    'Given a string, first determine if it looks like a reference\n    to a single environment variable, like "$FOO" or "${FOO}".\n    If so, return that variable with no decorations ("FOO").\n    If not, return None.'
    mo = _get_env_var.match(to_String(varstr))
    if mo:
        var = mo.group(1)
        if (var[0] == '{'):
            return var[1:(-1)]
        else:
            return var
    else:
        return None
