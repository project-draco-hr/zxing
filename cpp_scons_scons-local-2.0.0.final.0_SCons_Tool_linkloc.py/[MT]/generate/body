def generate(env):
    'Add Builders and construction variables for ar to an Environment.'
    SCons.Tool.createSharedLibBuilder(env)
    SCons.Tool.createProgBuilder(env)
    env['SUBST_CMD_FILE'] = LinklocGenerator
    env['SHLINK'] = '$LINK'
    env['SHLINKFLAGS'] = SCons.Util.CLVar('$LINKFLAGS')
    env['SHLINKCOM'] = '${SUBST_CMD_FILE("$SHLINK $SHLINKFLAGS $_LIBDIRFLAGS $_LIBFLAGS -dll $TARGET $SOURCES")}'
    env['SHLIBEMITTER'] = None
    env['LINK'] = 'linkloc'
    env['LINKFLAGS'] = SCons.Util.CLVar('')
    env['LINKCOM'] = '${SUBST_CMD_FILE("$LINK $LINKFLAGS $_LIBDIRFLAGS $_LIBFLAGS -exe $TARGET $SOURCES")}'
    env['LIBDIRPREFIX'] = '-libpath '
    env['LIBDIRSUFFIX'] = ''
    env['LIBLINKPREFIX'] = '-lib '
    env['LIBLINKSUFFIX'] = '$LIBSUFFIX'
    merge_default_version(env)
    addPharLapPaths(env)
