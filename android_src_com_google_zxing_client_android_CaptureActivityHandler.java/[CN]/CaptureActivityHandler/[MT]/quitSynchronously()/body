{
  state=State.DONE;
  CameraManager.get().stopPreview();
  Message quit=Message.obtain(decodeThread.handler,R.id.quit);
  quit.sendToTarget();
  try {
    decodeThread.join();
  }
 catch (  InterruptedException e) {
  }
  removeMessages(R.id.decode_succeeded);
  removeMessages(R.id.decode_failed);
}
