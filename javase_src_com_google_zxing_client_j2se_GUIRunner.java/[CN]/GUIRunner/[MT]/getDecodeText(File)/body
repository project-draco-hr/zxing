{
  BufferedImage image;
  try {
    image=ImageIO.read(file);
  }
 catch (  IOException ioe) {
    return ioe.toString();
  }
  if (image == null) {
    return "Could not decode image";
  }
  MonochromeBitmapSource source=new BufferedImageMonochromeBitmapSource(image);
  Result result;
  try {
    result=new MultiFormatReader().decode(source);
  }
 catch (  ReaderException re) {
    return re.toString();
  }
  return result.getText();
}
