{
  Point cameraResolution=configManager.getCameraResolution();
  if (!useOneShotPreviewCallback) {
    camera.setPreviewCallback(null);
  }
  Handler thePreviewHandler=previewHandler;
  if (thePreviewHandler != null) {
    Message message=thePreviewHandler.obtainMessage(previewMessage,cameraResolution.x,cameraResolution.y,data);
    message.sendToTarget();
    previewHandler=null;
  }
 else {
    Log.d(TAG,"Got preview callback, but no handler for it");
  }
}
