{
  if (type.equals(Contents.Type.TEXT)) {
    String data=intent.getStringExtra(Intents.Encode.DATA);
    if (data != null && data.length() > 0) {
      contents=data;
      displayContents=data;
      title=activity.getString(R.string.contents_text);
    }
  }
 else   if (type.equals(Contents.Type.EMAIL)) {
    String data=intent.getStringExtra(Intents.Encode.DATA);
    if (data != null && data.length() > 0) {
      contents="mailto:" + data;
      displayContents=data;
      title=activity.getString(R.string.contents_email);
    }
  }
 else   if (type.equals(Contents.Type.PHONE)) {
    String data=intent.getStringExtra(Intents.Encode.DATA);
    if (data != null && data.length() > 0) {
      contents="tel:" + data;
      displayContents=PhoneNumberUtils.formatNumber(data);
      title=activity.getString(R.string.contents_phone);
    }
  }
 else   if (type.equals(Contents.Type.SMS)) {
    String data=intent.getStringExtra(Intents.Encode.DATA);
    if (data != null && data.length() > 0) {
      contents="sms:" + data;
      displayContents=PhoneNumberUtils.formatNumber(data);
      title=activity.getString(R.string.contents_sms);
    }
  }
 else   if (type.equals(Contents.Type.CONTACT)) {
    Bundle bundle=intent.getBundleExtra(Intents.Encode.DATA);
    if (bundle != null) {
      StringBuilder newContents=new StringBuilder();
      StringBuilder newDisplayContents=new StringBuilder();
      newContents.append("MECARD:");
      String name=bundle.getString(Contacts.Intents.Insert.NAME);
      if (name != null && name.length() > 0) {
        newContents.append("N:").append(name).append(';');
        newDisplayContents.append(name);
      }
      String address=bundle.getString(Contacts.Intents.Insert.POSTAL);
      if (address != null && address.length() > 0) {
        newContents.append("ADR:").append(address).append(';');
        newDisplayContents.append('\n').append(address);
      }
      for (int x=0; x < Contents.PHONE_KEYS.length; x++) {
        String phone=bundle.getString(Contents.PHONE_KEYS[x]);
        if (phone != null && phone.length() > 0) {
          newContents.append("TEL:").append(phone).append(';');
          newDisplayContents.append('\n').append(PhoneNumberUtils.formatNumber(phone));
        }
      }
      for (int x=0; x < Contents.EMAIL_KEYS.length; x++) {
        String email=bundle.getString(Contents.EMAIL_KEYS[x]);
        if (email != null && email.length() > 0) {
          newContents.append("EMAIL:").append(email).append(';');
          newDisplayContents.append('\n').append(email);
        }
      }
      if (newDisplayContents.length() > 0) {
        newContents.append(';');
        contents=newContents.toString();
        displayContents=newDisplayContents.toString();
        title=activity.getString(R.string.contents_contact);
      }
 else {
        contents=null;
        displayContents=null;
      }
    }
  }
 else   if (type.equals(Contents.Type.LOCATION)) {
    Bundle bundle=intent.getBundleExtra(Intents.Encode.DATA);
    if (bundle != null) {
      float latitude=bundle.getFloat("LAT",Float.MAX_VALUE);
      float longitude=bundle.getFloat("LONG",Float.MAX_VALUE);
      if (latitude != Float.MAX_VALUE && longitude != Float.MAX_VALUE) {
        contents="geo:" + latitude + ','+ longitude;
        displayContents=latitude + "," + longitude;
        title=activity.getString(R.string.contents_location);
      }
    }
  }
}
