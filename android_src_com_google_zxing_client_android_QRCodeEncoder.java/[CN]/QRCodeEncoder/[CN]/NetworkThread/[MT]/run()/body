{
  AndroidHttpClient client=null;
  try {
    URI uri=new URI("http",null,"chart.apis.google.com",-1,"/chart","cht=qr&chs=" + mPixelResolution + "x"+ mPixelResolution+ "&chl="+ mContents,null);
    HttpUriRequest get=new HttpGet(uri);
    client=AndroidHttpClient.newInstance(mUserAgent);
    HttpResponse response=client.execute(get);
    HttpEntity entity=response.getEntity();
    Bitmap image=BitmapFactory.decodeStream(entity.getContent());
    if (image != null) {
      Message message=Message.obtain(mHandler,R.id.encode_succeeded);
      message.obj=image;
      message.sendToTarget();
    }
 else {
      Log.e(TAG,"Could not decode png from the network");
      Message message=Message.obtain(mHandler,R.id.encode_failed);
      message.sendToTarget();
    }
  }
 catch (  Exception e) {
    Log.e(TAG,e.toString());
    Message message=Message.obtain(mHandler,R.id.encode_failed);
    message.sendToTarget();
  }
 finally {
    if (client != null) {
      client.close();
    }
  }
}
