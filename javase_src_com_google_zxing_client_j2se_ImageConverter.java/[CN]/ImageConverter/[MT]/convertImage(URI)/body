{
  BufferedImage image=ImageIO.read(uri.toURL());
  MonochromeBitmapSource src=new BufferedImageMonochromeBitmapSource(image);
  int width=src.getWidth();
  int height=src.getHeight();
  BufferedImage result=new BufferedImage(width,height,BufferedImage.TYPE_BYTE_BINARY);
  for (int i=0; i < width; i++) {
    for (int j=0; j < height; j++) {
      result.setRGB(i,j,src.isBlack(i,j) ? BLACK : WHITE);
    }
  }
  File output=getOutput(uri);
  System.out.printf("Writing output to %s\n",output);
  ImageIO.write(result,FORMAT,output);
}
