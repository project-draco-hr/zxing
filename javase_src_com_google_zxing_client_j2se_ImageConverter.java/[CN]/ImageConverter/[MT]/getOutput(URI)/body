{
  File result=getFileOfUri(uri);
  if (result == null) {
    result=new File("ConvertedImage." + FORMAT);
  }
 else {
    String name=result.getPath();
    int dotpos=name.lastIndexOf((int)'.');
    if (dotpos != -1) {
      name=name.substring(0,dotpos);
    }
    String suffix=rowSampling ? "row" : "2d";
    result=new File(name + '.' + suffix+ '.'+ FORMAT);
  }
  return result;
}
