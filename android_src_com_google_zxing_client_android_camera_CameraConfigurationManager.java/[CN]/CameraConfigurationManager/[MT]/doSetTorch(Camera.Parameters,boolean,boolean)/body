{
  String flashMode;
  if (newSetting) {
    flashMode=findSettableValue(parameters.getSupportedFlashModes(),Camera.Parameters.FLASH_MODE_TORCH,Camera.Parameters.FLASH_MODE_ON);
  }
 else {
    flashMode=findSettableValue(parameters.getSupportedFlashModes(),Camera.Parameters.FLASH_MODE_OFF);
  }
  if (flashMode != null) {
    parameters.setFlashMode(flashMode);
  }
  SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(context);
  if (!prefs.getBoolean(PreferencesActivity.KEY_DISABLE_EXPOSURE,false)) {
    if (!safeMode) {
      ExposureInterface exposure=new ExposureManager().build();
      exposure.setExposure(parameters,newSetting);
    }
  }
}
