{
  Camera.Parameters parameters=camera.getParameters();
  doSetTorch(parameters,newSetting,false);
  camera.setParameters(parameters);
  SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(context);
  boolean currentSetting=prefs.getBoolean(PreferencesActivity.KEY_FRONT_LIGHT,false);
  if (currentSetting != newSetting) {
    SharedPreferences.Editor editor=prefs.edit();
    editor.putBoolean(PreferencesActivity.KEY_FRONT_LIGHT,newSetting);
    editor.commit();
  }
}
