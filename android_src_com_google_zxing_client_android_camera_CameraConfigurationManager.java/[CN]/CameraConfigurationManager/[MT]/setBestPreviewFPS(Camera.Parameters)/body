{
  List<int[]> supportedPreviewFpsRanges=parameters.getSupportedPreviewFpsRange();
  Log.i(TAG,"Supported FPS ranges: " + supportedPreviewFpsRanges);
  if (supportedPreviewFpsRanges != null && !supportedPreviewFpsRanges.isEmpty()) {
    int[] minimumSuitableFpsRange=null;
    for (    int[] fpsRange : supportedPreviewFpsRanges) {
      if (fpsRange[Camera.Parameters.PREVIEW_FPS_MAX_INDEX] >= MIN_FPS * 1000) {
        minimumSuitableFpsRange=fpsRange;
        break;
      }
    }
    if (minimumSuitableFpsRange == null) {
      Log.i(TAG,"No suitable FPS range?");
    }
 else {
      int[] currentFpsRange=new int[2];
      parameters.getPreviewFpsRange(currentFpsRange);
      if (!Arrays.equals(currentFpsRange,minimumSuitableFpsRange)) {
        Log.i(TAG,"Setting FPS range to " + Arrays.toString(minimumSuitableFpsRange));
        parameters.setPreviewFpsRange(minimumSuitableFpsRange[Camera.Parameters.PREVIEW_FPS_MIN_INDEX],minimumSuitableFpsRange[Camera.Parameters.PREVIEW_FPS_MAX_INDEX]);
      }
    }
  }
}
