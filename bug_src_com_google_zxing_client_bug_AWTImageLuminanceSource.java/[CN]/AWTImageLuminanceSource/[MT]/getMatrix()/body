{
  int width=getWidth();
  int height=getHeight();
  int area=width * height;
  byte[] matrix=new byte[area];
  for (int y=0; y < height; y++) {
    int offset=y * width;
    for (int x=0; x < width; x++) {
      int pixel=pixels[offset + x];
      int luminance=(((pixel & 0x00FF0000) >> 16) + ((pixel & 0x0000FF00) >> 7) + (pixel & 0x000000FF)) >> 2;
      matrix[x]=(byte)luminance;
    }
  }
  return matrix;
}
