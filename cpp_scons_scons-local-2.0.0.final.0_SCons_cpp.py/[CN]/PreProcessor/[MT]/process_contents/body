def process_contents(self, contents, fname=None):
    '\n        Pre-processes a file contents.\n\n        This is the main internal entry point.\n        '
    self.stack = []
    self.dispatch_table = self.default_table.copy()
    self.current_file = fname
    self.tuples = self.tupleize(contents)
    self.initialize_result(fname)
    while self.tuples:
        t = self.tuples.pop(0)
        self.dispatch_table[t[0]](t)
    return self.finalize_result(fname)
