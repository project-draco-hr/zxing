def InstallBuilderWrapper(env, target=None, source=None, dir=None, **kw):
    if (target and dir):
        import SCons.Errors
        raise SCons.Errors.UserError('Both target and dir defined for Install(), only one may be defined.')
    if (not dir):
        dir = target
    import SCons.Script
    install_sandbox = SCons.Script.GetOption('install_sandbox')
    if install_sandbox:
        target_factory = DESTDIR_factory(env, install_sandbox)
    else:
        target_factory = env.fs
    try:
        dnodes = env.arg2nodes(dir, target_factory.Dir)
    except TypeError:
        raise SCons.Errors.UserError(("Target `%s' of Install() is a file, but should be a directory.  Perhaps you have the Install() arguments backwards?" % str(dir)))
    sources = env.arg2nodes(source, env.fs.Entry)
    tgt = []
    for dnode in dnodes:
        for src in sources:
            target = env.fs.Entry((('.' + os.sep) + src.name), dnode)
            tgt.extend(BaseInstallBuilder(env, target, src, **kw))
    return tgt
