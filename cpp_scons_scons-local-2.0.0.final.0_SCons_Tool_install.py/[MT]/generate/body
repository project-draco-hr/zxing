def generate(env):
    from SCons.Script import AddOption, GetOption
    global added
    if (not added):
        added = 1
        AddOption('--install-sandbox', dest='install_sandbox', type='string', action='store', help='A directory under which all installed files will be placed.')
    global BaseInstallBuilder
    if (BaseInstallBuilder is None):
        install_sandbox = GetOption('install_sandbox')
        if install_sandbox:
            target_factory = DESTDIR_factory(env, install_sandbox)
        else:
            target_factory = env.fs
        BaseInstallBuilder = SCons.Builder.Builder(action=install_action, target_factory=target_factory.Entry, source_factory=env.fs.Entry, multi=1, emitter=[add_targets_to_INSTALLED_FILES], name='InstallBuilder')
    env['BUILDERS']['_InternalInstall'] = InstallBuilderWrapper
    env['BUILDERS']['_InternalInstallAs'] = InstallAsBuilderWrapper
    try:
        env['INSTALL']
    except KeyError:
        env['INSTALL'] = copyFunc
