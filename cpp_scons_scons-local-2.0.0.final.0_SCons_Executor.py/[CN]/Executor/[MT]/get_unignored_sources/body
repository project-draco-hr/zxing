def get_unignored_sources(self, node, ignore=()):
    key = ((node,) + tuple(ignore))
    try:
        memo_dict = self._memo['get_unignored_sources']
    except KeyError:
        memo_dict = {}
        self._memo['get_unignored_sources'] = memo_dict
    else:
        try:
            return memo_dict[key]
        except KeyError:
            pass
    if node:
        sourcelist = []
        for b in self.batches:
            if (node in b.targets):
                sourcelist = b.sources
                break
    else:
        sourcelist = self.get_all_sources()
    if ignore:
        idict = {}
        for i in ignore:
            idict[i] = 1
        sourcelist = [s for s in sourcelist if (s not in idict)]
    memo_dict[key] = sourcelist
    return sourcelist
