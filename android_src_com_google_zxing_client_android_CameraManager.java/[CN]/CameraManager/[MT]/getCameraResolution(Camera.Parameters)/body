{
  String previewSizeValueString=parameters.get("preview-size-values");
  if (previewSizeValueString == null) {
    previewSizeValueString=parameters.get("preview-size-value");
  }
  Point cameraResolution=null;
  if (previewSizeValueString != null) {
    Log.v(TAG,"preview-size parameter: " + previewSizeValueString);
    cameraResolution=findBestPreviewSizeValue(previewSizeValueString);
  }
  if (cameraResolution == null) {
    Camera.Size cameraPreviewSize=parameters.getPreviewSize();
    if (cameraPreviewSize != null) {
      Log.v(TAG,"Default preview size: " + cameraPreviewSize.width + ", "+ cameraPreviewSize.height);
      cameraResolution=new Point(cameraPreviewSize.width,cameraPreviewSize.height);
    }
  }
  if (cameraResolution == null) {
    cameraResolution=new Point(screenResolution.x,screenResolution.y);
  }
  cameraResolution.x=(cameraResolution.x >> 3) << 3;
  cameraResolution.y=(cameraResolution.y >> 3) << 3;
  return cameraResolution;
}
