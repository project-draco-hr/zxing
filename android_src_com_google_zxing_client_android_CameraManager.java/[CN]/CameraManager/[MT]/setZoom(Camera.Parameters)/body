{
  String zoomSupportedString=parameters.get("zoom-supported");
  if (zoomSupportedString != null && !Boolean.parseBoolean(zoomSupportedString)) {
    return;
  }
  int tenDesiredZoom=TEN_DESIRED_ZOOM;
  String maxZoomString=parameters.get("max-zoom");
  if (maxZoomString != null) {
    try {
      int tenMaxZoom=(int)(10.0 * Double.parseDouble(maxZoomString));
      if (tenDesiredZoom > tenMaxZoom) {
        tenDesiredZoom=tenMaxZoom;
      }
    }
 catch (    NumberFormatException nfe) {
      Log.w(TAG,"Bad max-zoom: " + maxZoomString);
    }
  }
  String takingPictureZoomMaxString=parameters.get("taking-picture-zoom-max");
  if (takingPictureZoomMaxString != null) {
    try {
      int tenMaxZoom=Integer.parseInt(takingPictureZoomMaxString);
      if (tenDesiredZoom > tenMaxZoom) {
        tenDesiredZoom=tenMaxZoom;
      }
    }
 catch (    NumberFormatException nfe) {
      Log.w(TAG,"Bad taking-picture-zoom-max: " + takingPictureZoomMaxString);
    }
  }
  String motZoomValuesString=parameters.get("mot-zoom-values");
  if (motZoomValuesString != null) {
    tenDesiredZoom=findBestMotZoomValue(motZoomValuesString,tenDesiredZoom);
  }
  String motZoomStepString=parameters.get("mot-zoom-step");
  if (motZoomStepString != null) {
    try {
      double motZoomStep=Double.parseDouble(motZoomStepString.trim());
      int tenZoomStep=(int)(10.0 * motZoomStep);
      if (tenZoomStep > 1) {
        tenDesiredZoom-=tenDesiredZoom % tenZoomStep;
      }
    }
 catch (    NumberFormatException nfe) {
    }
  }
  if (maxZoomString != null || motZoomValuesString != null) {
    parameters.set("zoom",String.valueOf(tenDesiredZoom / 10.0));
  }
  if (takingPictureZoomMaxString != null) {
    parameters.set("taking-picture-zoom",tenDesiredZoom);
  }
}
