{
  if (contents.length() == 0) {
    throw new IllegalArgumentException("Found empty contents");
  }
  if (width < 0 || height < 0) {
    throw new IllegalArgumentException("Negative size is not allowed. Input: " + width + 'x'+ height);
  }
  int sidesMargin=getDefaultMargin();
  if (hints != null) {
    Integer sidesMarginInt=(Integer)hints.get(EncodeHintType.MARGIN);
    if (sidesMarginInt != null) {
      sidesMargin=sidesMarginInt;
    }
  }
  boolean[] code=encode(contents);
  return renderResult(code,width,height,sidesMargin);
}
