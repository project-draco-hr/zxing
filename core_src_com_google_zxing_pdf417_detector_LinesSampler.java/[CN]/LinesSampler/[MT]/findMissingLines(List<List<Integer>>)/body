{
  List<Integer> insertLinesAt=new ArrayList<Integer>();
  if (detectedCodeWords.size() > 1) {
    for (int i=0; i < detectedCodeWords.size() - 1; i++) {
      int clusterNumberRow=-1;
      for (int j=0; j < detectedCodeWords.get(i).size() && clusterNumberRow == -1; j++) {
        int clusterNumber=calculateClusterNumber(detectedCodeWords.get(i).get(j));
        if (clusterNumber != -1) {
          clusterNumberRow=clusterNumber;
        }
      }
      if (i == 0) {
        if (clusterNumberRow > 0) {
          insertLinesAt.add(0);
          if (clusterNumberRow > 3) {
            insertLinesAt.add(0);
          }
        }
      }
      int clusterNumberNextRow=-1;
      for (int j=0; j < detectedCodeWords.get(i + 1).size() && clusterNumberNextRow == -1; j++) {
        int clusterNumber=calculateClusterNumber(detectedCodeWords.get(i + 1).get(j));
        if (clusterNumber != -1) {
          clusterNumberNextRow=clusterNumber;
        }
      }
      if ((clusterNumberRow + 3) % 9 != clusterNumberNextRow && clusterNumberRow != -1 && clusterNumberNextRow != -1) {
        insertLinesAt.add(i + 1);
        if (clusterNumberRow == clusterNumberNextRow) {
          insertLinesAt.add(i + 1);
        }
      }
    }
  }
  for (int i=0; i < insertLinesAt.size(); i++) {
    List<Integer> v=new ArrayList<Integer>();
    for (int j=0; j < symbolsPerLine; ++j) {
      v.add(0);
    }
    detectedCodeWords.add(insertLinesAt.get(i) + i,v);
  }
  return insertLinesAt;
}
