{
  StringBuilder newContents=new StringBuilder(100);
  newContents.append("MECARD:");
  StringBuilder newDisplayContents=new StringBuilder(100);
  appendUpToUnique(newContents,newDisplayContents,"N",names,1,new Formatter(){
    @Override public String format(    String source){
      return source == null ? null : COMMA.matcher(source).replaceAll("");
    }
  }
);
  append(newContents,newDisplayContents,"ORG",organization);
  appendUpToUnique(newContents,newDisplayContents,"ADR",addresses,1,null);
  appendUpToUnique(newContents,newDisplayContents,"TEL",phones,Integer.MAX_VALUE,new Formatter(){
    @Override public String format(    String source){
      CharSequence s=PhoneNumberUtils.formatNumber(source);
      return s == null ? null : NOT_DIGITS.matcher(s).replaceAll("");
    }
  }
);
  appendUpToUnique(newContents,newDisplayContents,"EMAIL",emails,Integer.MAX_VALUE,null);
  appendUpToUnique(newContents,newDisplayContents,"URL",urls,Integer.MAX_VALUE,null);
  append(newContents,newDisplayContents,"NOTE",note);
  newContents.append(';');
  return new String[]{newContents.toString(),newDisplayContents.toString()};
}
