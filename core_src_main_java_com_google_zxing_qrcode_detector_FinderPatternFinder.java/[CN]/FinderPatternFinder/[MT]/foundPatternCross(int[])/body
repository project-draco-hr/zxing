{
  int totalModuleSize=0;
  for (int i=0; i < 5; i++) {
    int count=stateCount[i];
    if (count == 0) {
      return false;
    }
    totalModuleSize+=count;
  }
  if (totalModuleSize < 7) {
    return false;
  }
  int moduleSize=(totalModuleSize << INTEGER_MATH_SHIFT) / 7;
  int maxVariance=moduleSize / 2;
  return Math.abs(moduleSize - (stateCount[0] << INTEGER_MATH_SHIFT)) < maxVariance && Math.abs(moduleSize - (stateCount[1] << INTEGER_MATH_SHIFT)) < maxVariance && Math.abs(3 * moduleSize - (stateCount[2] << INTEGER_MATH_SHIFT)) < 3 * maxVariance && Math.abs(moduleSize - (stateCount[3] << INTEGER_MATH_SHIFT)) < maxVariance && Math.abs(moduleSize - (stateCount[4] << INTEGER_MATH_SHIFT)) < maxVariance;
}
