{
  try {
    String uri;
    if (LocaleManager.isBookSearchUrl(isbn)) {
      int equals=isbn.indexOf('=');
      String volumeId=isbn.substring(equals + 1);
      uri="http://www.google.com/books?id=" + volumeId + "&jscmd=SearchWithinVolume2&q="+ query;
    }
 else {
      uri="http://www.google.com/books?vid=isbn" + isbn + "&jscmd=SearchWithinVolume2&q="+ query;
    }
    try {
      String content=HttpHelper.downloadViaHttp(uri,HttpHelper.ContentType.JSON);
      JSONObject json=new JSONObject(content);
      Message message=Message.obtain(handler,R.id.search_book_contents_succeeded);
      message.obj=json;
      message.sendToTarget();
    }
 catch (    IOException ioe) {
      Message message=Message.obtain(handler,R.id.search_book_contents_failed);
      message.sendToTarget();
    }
  }
 catch (  JSONException je) {
    Log.w(TAG,"Error accessing book search",je);
    Message message=Message.obtain(handler,R.id.search_book_contents_failed);
    message.sendToTarget();
  }
}
