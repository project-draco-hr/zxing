{
  int bitMask=0;
  int count=0;
  int offset=0;
  for (int j=0; j < dimension; j++) {
    int jComponent=j / 3;
    for (int i=0; i < dimension; i++) {
      if (((i >> 1 + jComponent) & 0x01) == 0) {
        bitMask|=1 << count;
      }
      if (++count == 32) {
        bits[offset++]^=bitMask;
        count=0;
        bitMask=0;
      }
    }
  }
  bits[offset]^=bitMask;
}
