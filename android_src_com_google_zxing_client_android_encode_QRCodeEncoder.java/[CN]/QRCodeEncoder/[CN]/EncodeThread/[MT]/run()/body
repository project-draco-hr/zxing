{
  try {
    Bitmap bitmap=encodeAsBitmap(contents,format,pixelResolution,pixelResolution);
    Message message=Message.obtain(handler,R.id.encode_succeeded);
    message.obj=bitmap;
    message.sendToTarget();
  }
 catch (  WriterException e) {
    Log.e(TAG,e.toString());
    Message message=Message.obtain(handler,R.id.encode_failed);
    message.sendToTarget();
  }
catch (  IllegalArgumentException e) {
    Log.e(TAG,e.toString());
    Message message=Message.obtain(handler,R.id.encode_failed);
    message.sendToTarget();
  }
}
