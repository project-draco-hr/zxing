{
  super(width,height);
  int sourceWidth=image.getWidth();
  int sourceHeight=image.getHeight();
  if (left + width > sourceWidth || top + height > sourceHeight) {
    throw new IllegalArgumentException("Crop rectangle does not fit within image data.");
  }
  int[] buffer=new int[width];
  for (int y=top; y < top + height; y++) {
    image.getRGB(left,y,width,1,buffer,0,sourceWidth);
    boolean rowChanged=false;
    for (int x=0; x < width; x++) {
      if ((buffer[x] & 0xFF000000) == 0) {
        buffer[x]=0xFFFFFFFF;
        rowChanged=true;
      }
    }
    if (rowChanged) {
      image.setRGB(left,y,width,1,buffer,0,sourceWidth);
    }
  }
  this.image=new BufferedImage(sourceWidth,sourceHeight,BufferedImage.TYPE_BYTE_GRAY);
  this.image.getGraphics().drawImage(image,0,0,null);
  this.left=left;
  this.top=top;
}
