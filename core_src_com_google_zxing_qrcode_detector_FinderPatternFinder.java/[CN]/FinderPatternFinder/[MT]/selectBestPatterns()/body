{
  int startSize=possibleCenters.size();
  if (startSize < 3) {
    throw NotFoundException.getNotFoundInstance();
  }
  if (startSize > 3) {
    float totalModuleSize=0.0f;
    for (int i=0; i < startSize; i++) {
      totalModuleSize+=((FinderPattern)possibleCenters.elementAt(i)).getEstimatedModuleSize();
    }
    float average=totalModuleSize / (float)startSize;
    for (int i=0; i < possibleCenters.size() && possibleCenters.size() > 3; i++) {
      FinderPattern pattern=(FinderPattern)possibleCenters.elementAt(i);
      if (Math.abs(pattern.getEstimatedModuleSize() - average) > 0.2f * average) {
        possibleCenters.removeElementAt(i);
        i--;
      }
    }
  }
  if (possibleCenters.size() > 3) {
    Collections.insertionSort(possibleCenters,new CenterComparator());
    possibleCenters.setSize(3);
  }
  return new FinderPattern[]{(FinderPattern)possibleCenters.elementAt(0),(FinderPattern)possibleCenters.elementAt(1),(FinderPattern)possibleCenters.elementAt(2)};
}
