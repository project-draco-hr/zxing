{
  Collections.insertionSort(possibleCenters,new CenterComparator());
  int size=0;
  int max=possibleCenters.size();
  while (size < max) {
    if (((FinderPattern)possibleCenters.elementAt(size)).getCount() < CENTER_QUORUM) {
      break;
    }
    size++;
  }
  if (size < 3) {
    throw new ReaderException("Could not find three finder patterns");
  }
  if (size == 3) {
    FinderPattern[] result=new FinderPattern[possibleCenters.size()];
    for (int i=0; i < possibleCenters.size(); i++) {
      result[i]=(FinderPattern)possibleCenters.elementAt(i);
    }
    return result;
  }
  possibleCenters.setSize(size);
  float averageModuleSize=0.0f;
  for (int i=0; i < size; i++) {
    averageModuleSize+=((FinderPattern)possibleCenters.elementAt(i)).getEstimatedModuleSize();
  }
  averageModuleSize/=(float)size;
  Collections.insertionSort(possibleCenters,new ClosestToAverageComparator(averageModuleSize));
  FinderPattern[] result=new FinderPattern[3];
  for (int i=0; i < 3; i++) {
    result[i]=(FinderPattern)possibleCenters.elementAt(i);
  }
  return result;
}
