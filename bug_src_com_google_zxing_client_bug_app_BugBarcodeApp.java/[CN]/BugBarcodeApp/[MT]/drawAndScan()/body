{
  imageCanvas.setImage(image.getScaledInstance(216,150,Image.SCALE_FAST));
  if (!pictureTaken) {
    frame.add(imageCanvas,BorderLayout.CENTER);
    pictureTaken=true;
    frame.setVisible(true);
  }
  imageCanvas.repaint();
  try {
    LuminanceSource source=new AWTImageLuminanceSource(image);
    BinaryBitmap bitmap=new BinaryBitmap(new GlobalHistogramBinarizer(source));
    Result result=reader.decode(bitmap);
    barcodeLabel.setText(result.getText());
  }
 catch (  ReaderException re) {
    barcodeLabel.setText("I can't find a barcode here");
  }
}
