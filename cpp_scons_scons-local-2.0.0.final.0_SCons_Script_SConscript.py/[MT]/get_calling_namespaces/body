def get_calling_namespaces():
    'Return the locals and globals for the function that called\n    into this module in the current call stack.'
    try:
        (1 // 0)
    except ZeroDivisionError:
        frame = sys.exc_info()[2].tb_frame.f_back
    while (frame.f_globals.get('__name__') == __name__):
        frame = frame.f_back
    return (frame.f_locals, frame.f_globals)
