def fs_delete(self, path, pathstr, remove=1):
    try:
        if os.path.lexists(path):
            if (os.path.isfile(path) or os.path.islink(path)):
                if remove:
                    os.unlink(path)
                display(('Removed ' + pathstr))
            elif (os.path.isdir(path) and (not os.path.islink(path))):
                for e in sorted(os.listdir(path)):
                    p = os.path.join(path, e)
                    s = os.path.join(pathstr, e)
                    if os.path.isfile(p):
                        if remove:
                            os.unlink(p)
                        display(('Removed ' + s))
                    else:
                        self.fs_delete(p, s, remove)
                if remove:
                    os.rmdir(path)
                display(('Removed directory ' + pathstr))
            else:
                errstr = "Path '%s' exists but isn't a file or directory."
                raise SCons.Errors.UserError((errstr % pathstr))
    except SCons.Errors.UserError as e:
        print e
    except (IOError, OSError) as e:
        print ("scons: Could not remove '%s':" % pathstr), e.strerror
