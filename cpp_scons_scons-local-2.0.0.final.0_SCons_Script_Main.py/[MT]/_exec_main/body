def _exec_main(parser, values):
    sconsflags = os.environ.get('SCONSFLAGS', '')
    all_args = (sconsflags.split() + sys.argv[1:])
    (options, args) = parser.parse_args(all_args, values)
    if (isinstance(options.debug, list) and ('pdb' in options.debug)):
        import pdb
        pdb.Pdb().runcall(_main, parser)
    elif options.profile_file:
        from profile import Profile
        try:
            dispatch = Profile.dispatch
        except AttributeError:
            pass
        else:
            dispatch['c_exception'] = Profile.trace_dispatch_return
        prof = Profile()
        try:
            prof.runcall(_main, parser)
        except SConsPrintHelpException as e:
            prof.dump_stats(options.profile_file)
            raise e
        except SystemExit:
            pass
        prof.dump_stats(options.profile_file)
    else:
        _main(parser)
