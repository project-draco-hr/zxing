def _strip_initial_spaces(self, s):
    lines = s.split('\n')
    spaces = re.match(' *', lines[0]).group(0)

    def strip_spaces(l, spaces=spaces):
        if (l[:len(spaces)] == spaces):
            l = l[len(spaces):]
        return l
    lines = list(map(strip_spaces, lines))
    return '\n'.join(lines)
