{
  Date date1=datePicker1.getValue();
  Date date2=datePicker2.getValue();
  if (date1 == null || date2 == null) {
    throw new GeneratorException("Start and end dates must be set.");
  }
  if (date1.equals(date2) || date1.after(date2)) {
    throw new GeneratorException("End date must be at least a day after start date.");
  }
  DateTimeFormat isoFormatter=DateTimeFormat.getFormat("yyyyMMdd");
  StringBuilder output=new StringBuilder();
  output.append("DTSTART;VALUE=DATE:");
  output.append(isoFormatter.format(date1));
  output.append("\r\n");
  output.append("DTEND;VALUE=DATE:");
  output.append(isoFormatter.format(date2));
  output.append("\r\n");
  return output.toString();
}
