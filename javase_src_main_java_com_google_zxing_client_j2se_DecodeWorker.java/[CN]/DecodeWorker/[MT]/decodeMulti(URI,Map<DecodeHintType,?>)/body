{
  BufferedImage image=ImageReader.readImage(uri);
  try {
    LuminanceSource source;
    if (config.getCrop() == null) {
      source=new BufferedImageLuminanceSource(image);
    }
 else {
      int[] crop=config.getCrop();
      source=new BufferedImageLuminanceSource(image,crop[0],crop[1],crop[2],crop[3]);
    }
    BinaryBitmap bitmap=new BinaryBitmap(new HybridBinarizer(source));
    if (config.isDumpBlackPoint()) {
      dumpBlackPoint(uri,image,bitmap);
    }
    MultiFormatReader multiFormatReader=new MultiFormatReader();
    MultipleBarcodeReader reader=new GenericMultipleBarcodeReader(multiFormatReader);
    Result[] results=reader.decodeMultiple(bitmap,hints);
    if (config.isBrief()) {
      System.out.println(uri + ": Success");
    }
 else {
      for (      Result result : results) {
        ParsedResult parsedResult=ResultParser.parseResult(result);
        System.out.println(uri + " (format: " + result.getBarcodeFormat()+ ", type: "+ parsedResult.getType()+ "):\nRaw result:\n"+ result.getText()+ "\nParsed result:\n"+ parsedResult.getDisplayResult());
        System.out.println("Found " + result.getResultPoints().length + " result points.");
        for (int i=0; i < result.getResultPoints().length; i++) {
          ResultPoint rp=result.getResultPoints()[i];
          System.out.println("  Point " + i + ": ("+ rp.getX()+ ','+ rp.getY()+ ')');
        }
      }
    }
    return results;
  }
 catch (  NotFoundException ignored) {
    System.out.println(uri + ": No barcode found");
    return null;
  }
}
