def stripinstallbuilder(target, source, env):
    ' strips the install builder action from the source list and stores\n    the final installation location as the "PACKAGING_INSTALL_LOCATION" of\n    the source of the source file. This effectively removes the final installed\n    files from the source list while remembering the installation location.\n\n    It also warns about files which have no install builder attached.\n    '

    def has_no_install_location(file):
        return (not (file.has_builder() and hasattr(file.builder, 'name') and ((file.builder.name == 'InstallBuilder') or (file.builder.name == 'InstallAsBuilder'))))
    if len(list(filter(has_no_install_location, source))):
        warn(Warning, 'there are files to package which have no        InstallBuilder attached, this might lead to irreproducible packages')
    n_source = []
    for s in source:
        if has_no_install_location(s):
            n_source.append(s)
        else:
            for ss in s.sources:
                n_source.append(ss)
                copy_attr(s, ss)
                setattr(ss, 'PACKAGING_INSTALL_LOCATION', s.get_path())
    return (target, n_source)
