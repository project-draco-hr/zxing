{
  Log.i(TAG,"Downloading " + uri);
  URL url=new URL(uri);
  HttpURLConnection connection=safelyOpenConnection(url);
  connection.setRequestProperty("Accept",contentTypes);
  connection.setRequestProperty("Accept-Charset","utf-8,*");
  connection.setRequestProperty("User-Agent","ZXing (Android)");
  try {
    int responseCode=safelyConnect(uri,connection);
    if (responseCode != HttpURLConnection.HTTP_OK) {
      throw new IOException("Bad HTTP response: " + responseCode);
    }
    Log.i(TAG,"Consuming " + uri);
    return consume(connection,maxChars);
  }
  finally {
    connection.disconnect();
  }
}
