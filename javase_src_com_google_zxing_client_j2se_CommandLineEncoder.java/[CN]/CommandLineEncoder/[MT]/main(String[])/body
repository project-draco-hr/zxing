{
  if (args.length == 0) {
    printUsage();
    return;
  }
  BarcodeFormat barcodeFormat=DEFAULT_BARCODE_FORMAT;
  String imageFormat=DEFAULT_IMAGE_FORMAT;
  String outFileString=DEFAULT_OUTPUT_FILE;
  int width=DEFAULT_WIDTH;
  int height=DEFAULT_HEIGHT;
  for (  String arg : args) {
    if (arg.startsWith("--barcode_format")) {
      barcodeFormat=BarcodeFormat.valueOf(arg.split("=")[1]);
    }
 else     if (arg.startsWith("--image_format")) {
      imageFormat=arg.split("=")[1];
    }
 else     if (arg.startsWith("--output")) {
      outFileString=arg.split("=")[1];
    }
 else     if (arg.startsWith("--width")) {
      width=Integer.parseInt(arg.split("=")[1]);
    }
 else     if (arg.startsWith("--height")) {
      height=Integer.parseInt(arg.split("=")[1]);
    }
  }
  if (DEFAULT_OUTPUT_FILE.equals(outFileString)) {
    outFileString+='.' + imageFormat.toLowerCase(Locale.ENGLISH);
  }
  String contents=null;
  for (  String arg : args) {
    if (!arg.startsWith("--")) {
      contents=arg;
      break;
    }
  }
  if (contents == null) {
    printUsage();
    return;
  }
  MultiFormatWriter barcodeWriter=new MultiFormatWriter();
  BitMatrix matrix=barcodeWriter.encode(contents,barcodeFormat,width,height);
  MatrixToImageWriter.writeToFile(matrix,imageFormat,new File(outFileString));
}
