{
  super.onResume();
  SurfaceView surfaceView=(SurfaceView)findViewById(R.id.preview_view);
  SurfaceHolder surfaceHolder=surfaceView.getHolder();
  if (mHasSurface) {
    initCamera(surfaceHolder);
  }
 else {
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
  }
  Intent intent=getIntent();
  if (intent != null && (intent.getAction().equals(Intents.Scan.ACTION) || intent.getAction().equals(Intents.Scan.DEPRECATED_ACTION))) {
    mScanIntent=true;
    mDecodeMode=intent.getStringExtra(Intents.Scan.MODE);
    resetStatusView();
  }
 else {
    mScanIntent=false;
    mDecodeMode=null;
    if (mLastResult == null) {
      resetStatusView();
    }
  }
  SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(this);
  mPlayBeep=prefs.getBoolean(PreferencesActivity.KEY_PLAY_BEEP,true);
  mVibrate=prefs.getBoolean(PreferencesActivity.KEY_VIBRATE,false);
  mCopyToClipboard=prefs.getBoolean(PreferencesActivity.KEY_COPY_TO_CLIPBOARD,true);
  initBeepSound();
}
